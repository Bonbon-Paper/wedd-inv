(()=>{var M=(()=>{let n=null,r=null,m=0,c=0,p=!0,a=null,f=()=>{m+=1},i=()=>`(${c}/${m}) [${parseInt(c/m*100).toFixed(0)}%]`;return{init:()=>{n=document.getElementById("progress-info"),r=document.getElementById("progress-bar"),n&&n.classList.remove("d-none"),a=new Promise(g=>document.addEventListener("undangan.progress.invalid",g))},add:f,invalid:g=>{!r||!n||p&&(p=!1,r.style.backgroundColor="red",n.innerText=`Error loading ${g} ${i()}`,document.dispatchEvent(new Event("undangan.progress.invalid")))},complete:(g,$=!1)=>{!p||!n||(c+=1,r&&(n.innerText=`Loading ${g} ${$?"skipped":"complete"} ${i()}`,r.style.width=Math.min(c/m*100,100).toString()+"%"),c===m&&(p=!1,a=null,document.dispatchEvent(new Event("undangan.progress.done"))))},getAbort:()=>a}})();var u=(()=>{let n='<span class="spinner-border spinner-border-sm my-0 ms-0 me-1 p-0" style="height: 0.8rem; width: 0.8rem;"></span>',r=[["*",'<strong class="text-theme-auto">$1</strong>'],["_",'<em class="text-theme-auto">$1</em>'],["~",'<del class="text-theme-auto">$1</del>'],["```",'<code class="font-monospace text-theme-auto">$1</code>']],m=[{type:"Mobile",regex:/Android.*Mobile|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i},{type:"Tablet",regex:/iPad|Android(?!.*Mobile)|Tablet/i},{type:"Desktop",regex:/Windows NT|Macintosh|Linux/i}],c=[{name:"Chrome",regex:/Chrome|CriOS/i},{name:"Safari",regex:/Safari/i},{name:"Edge",regex:/Edg|Edge/i},{name:"Firefox",regex:/Firefox|FxiOS/i},{name:"Opera",regex:/Opera|OPR/i},{name:"Internet Explorer",regex:/MSIE|Trident/i},{name:"Samsung Browser",regex:/SamsungBrowser/i}],p=[{name:"Windows",regex:/Windows NT ([\d.]+)/i},{name:"MacOS",regex:/Mac OS X ([\d_.]+)/i},{name:"Android",regex:/Android ([\d.]+)/i},{name:"iOS",regex:/OS ([\d_]+) like Mac OS X/i},{name:"Linux",regex:/Linux/i},{name:"Ubuntu",regex:/Ubuntu/i},{name:"Chrome OS",regex:/CrOS/i}],a=e=>String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),f=e=>{let t=l=>{window.alert(`${l} ${e}`)};return{success:()=>t("\u{1F7E9}"),error:()=>t("\u{1F7E5}"),warning:()=>t("\u{1F7E8}"),info:()=>t("\u{1F7E6}"),custom:l=>t(l)}},i=e=>window.confirm(`\u{1F7E6} ${e}`),s=(e,t)=>(e.replaceChildren(document.createRange().createContextualFragment(t)),e),h=(e,t,l=.05)=>new Promise(w=>{let x=parseFloat(e.style.opacity),I=t?1:0,S=()=>{x+=t?l:-l,x=Math.max(0,Math.min(1,x)),e.style.opacity=x.toFixed(2),t&&x>=I||!t&&x<=I?(e.style.opacity=I.toString(),w(e)):requestAnimationFrame(S)};requestAnimationFrame(S)}),y=(e,t=0)=>{let l=null;l=setTimeout(()=>{e(),clearTimeout(l),l=null},t)};return{loader:n,ask:i,copy:async(e,t=null,l=1500)=>{let w=e.getAttribute("data-copy");if(!w||w.length===0){f("Nothing to copy").warning();return}e.disabled=!0;try{await navigator.clipboard.writeText(w)}catch{e.disabled=!1,f("Failed to copy").error();return}let x=e.innerHTML;s(e,t||'<i class="fa-solid fa-check"></i>'),y(()=>{e.disabled=!1,e.innerHTML=x},l)},notify:f,timeOut:y,debounce:(e,t=100)=>{let l=null;return(...w)=>{clearTimeout(l),l=setTimeout(()=>e(...w),t)}},escapeHtml:a,base64Encode:e=>{let l=new TextEncoder().encode(e);return window.btoa(String.fromCharCode(...l))},base64Decode:e=>{let t=new TextDecoder,l=Uint8Array.from(window.atob(e),w=>w.charCodeAt(0));return t.decode(l)},disableButton:(e,t="Loading",l=!1)=>{e.disabled=!0;let w=e.innerHTML;return s(e,l?t:n+t),{restore:(x=!1)=>{e.innerHTML=w,e.disabled=x}}},disableCheckbox:e=>{e.disabled=!0;let t=document.querySelector(`label[for="${e.id}"]`),l=t.innerHTML;return s(t,n+l),{restore:()=>{t.innerHTML=l,e.disabled=!1}}},safeInnerHTML:s,parseUserAgent:e=>{if(!e||typeof e!="string")return"Unknown";let t=m.find(S=>S.regex.test(e))?.type??"Unknown",l=c.find(S=>S.regex.test(e))?.name??"Unknown",w=p.find(S=>S.regex.test(e)),x=w?w.name:"Unknown",I=w?e.match(w.regex)?.[1]?.replace(/_/g,".")??null:null;return`${l} ${t} ${I?`${x} ${I}`:x}`},changeOpacity:h,getGMTOffset:e=>{let t=new Date,l=new Intl.DateTimeFormat("en-US",{timeZone:e,hourCycle:"h23",hour:"numeric"}),w=(parseInt(l.format(t))-t.getUTCHours()+24)%24;return w>12&&(w-=24),`GMT${w>=0?"+":""}${w}`},convertMarkdownToHTML:e=>(r.forEach(([t,l])=>{e=e.replace(new RegExp(`\\${t}(\\S(?:[\\s\\S]*?\\S)?)\\${t}`,"g"),l)}),e)}})();var X="POST",de="PATCH",me="DELETE";var ee="AbortError",$e="TypeError",te={Accept:"application/json","Content-Type":"application/json"},ue="request",re=(()=>{let n=null;return{getInstance:r=>{if(!n||!n.has(r))throw new Error(`please init cache first: ${r}`);return n.get(r)},restart:async r=>{n.set(r,null),n.delete(r),await window.caches.delete(r),await window.caches.open(r).then(m=>n.set(r,m))},init:(r,m=[])=>{if(!window.isSecureContext)throw new Error("this application required secure context");n=new Map,Promise.all(m.concat([ue]).map(c=>window.caches.open(c).then(p=>n.set(c,p)))).then(()=>r())}}})(),ie=n=>{let r=re.getInstance(n);return{set:(a,f,i,s)=>f.clone().arrayBuffer().then(h=>{if(!f.ok)return f;let y=new Date,o=new Headers(f.headers);if(o.has("Date")||o.set("Date",y.toUTCString()),i||!o.has("Cache-Control")){if(!i&&o.has("Expires")){let g=new Date(o.get("Expires"));s=Math.max(0,g.getTime()-y.getTime())}if(s===0)throw new Error("Cache max age cannot be 0");o.set("Cache-Control",`public, max-age=${Math.floor(s/1e3)}`)}return o.has("Content-Length")||o.set("Content-Length",String(h.byteLength)),r.put(a,new Response(h,{headers:o})).then(()=>f)}),has:a=>r.match(a).then(f=>{if(!f)return null;let i=f.headers.get("Cache-Control").match(/max-age=(\d+)/)[1],s=Date.parse(f.headers.get("Date"))+parseInt(i)*1e3;return Date.now()>s?null:f}),del:a=>r.delete(a)}},F=(n,r)=>{let m=new AbortController,c={signal:m.signal,credential:"include",headers:new Headers(te),method:String(n).toUpperCase()},p=0,a=0,f=0,i=0,s=!1,h=!1,y=null,o=null,g=null,$=k=>{let A=()=>{let E=()=>window.fetch(k,c).then(async e=>{if(s)return m.abort(),new Response(null,{status:e.status,statusText:e.statusText,headers:new Headers(e.headers)});if(!e.ok||!g)return e;let t=parseInt(e.headers.get("Content-Length")??0);if(t===0)return e;let l=[],w=0,x=e.body.getReader();for(;;){let{done:S,value:R}=await x.read();if(S)break;l.push(R),w+=R.length,await g(w,t,window.structuredClone?window.structuredClone(l):l)}let I=e.headers.get("Content-Type")??"application/octet-stream";return new Response(new Blob(l,{type:I}),{status:e.status,statusText:e.statusText,headers:new Headers(e.headers)})});if(p===0||s)return E();if(c.method!=="GET")return console.warn("Only method GET can be cached"),E();let d=ie(ue);return d.has(k).then(e=>e?Promise.resolve(e):d.del(k).then(E).then(t=>d.set(k,t,h,p)))};if(a===0||f===0)return A();let T=async()=>{try{return await A()}catch(E){if(E.name===ee)throw E;if(f*=2,i++,i>a)throw new Error(`Max retries reached: ${E}`);return console.warn(`Retrying fetch (${i}/${a}): ${k.toString()}`),await new Promise(d=>window.setTimeout(d,f)),T()}};return T()},C=k=>{if(k.status!==200)return Promise.resolve(k);let A=document.querySelector("a[download]");A&&document.body.removeChild(A);let T=k.headers.get("Content-Disposition")?.match(/filename="(.+)"/)?.[1];return k.clone().blob().then(E=>{let d=document.createElement("a"),e=window.URL.createObjectURL(E);return d.href=e,d.download=T||`${o}.${y||(E.type.split("/")?.[1]??"bin")}`,document.body.appendChild(d),d.click(),document.body.removeChild(d),window.URL.revokeObjectURL(e),k})};return{send(k=null){return o&&Object.keys(te).forEach(A=>c.headers.delete(A)),$(new URL(r,document.body.getAttribute("data-url"))).then(A=>o&&A.ok?C(A).then(T=>({code:T.status,data:T,error:null})):A.json().then(T=>{if(T.error){let E=T.error.at(0),d=A.status>=500;throw new Error(d?`ID: ${T.id}
\u{1F7E5} ${E}`:`\u{1F7E8} ${E}`)}return k&&(T.data=k(T.data)),Object.assign(T,{code:A.status})})).catch(A=>{if(A.name===ee)return console.warn("Fetch aborted:",A),A;throw A.name===$e&&(A=new Error("\u{1F7E5} Network error or rate limit exceeded")),alert(A.message??String(A)),A})},withCache(k=1e3*60*60*6){return p=k,this},withForceCache(k=1e3*60*60*6){return h=!0,p===0&&(p=k),this},withNoBody(){return s=!0,this},withRetry(k=3,A=1e3){return a=k,f=A,this},withCancel(k){return k==null?this:((async()=>(await k,m.abort()))(),this)},withDownload(k,A=null){return o=k,y=A,this},withProgressFunc(k=null){return g=k,this},default(k=null){return c.headers=new Headers(k??{}),$(r).then(A=>o?C(A):Promise.resolve(A))},token(k){return k.split(".").length===3?(c.headers.append("Authorization","Bearer "+k),this):(c.headers.append("x-access-key",k),this)},body(k){if(c.method==="GET")throw new Error("GET method does not support body");return c.body=JSON.stringify(k),this}}};var J=n=>{let r=new Map,m=new Map,c=ie(n),p=1e3*60*60*6,a=!1,f=(g,$)=>{if(!$.ok)throw new Error($.statusText);return c.set(g,$,a,p)},i=g=>c.has(g),s=g=>c.del(g),h=(g,$=null)=>{if(r.has(g))return Promise.resolve(r.get(g));if(m.has(g))return m.get(g);let C=()=>F("GET",g).withCancel($).withRetry().default(),k=i(g).then(A=>A?Promise.resolve(A):s(g).then(C).then(T=>f(g,T))).then(A=>A.blob()).then(A=>r.set(g,URL.createObjectURL(A))).then(()=>r.get(g)).finally(()=>m.delete(g));return m.set(g,k),k};return{run:(g,$=null)=>{let C=new Map;return g.length===0?Promise.resolve():(g.filter(k=>k!==null).forEach(k=>{let A=C.get(k.url)??[];C.set(k.url,[...A,[k.res,k?.rej]])}),Promise.allSettled(Array.from(C).map(([k,A])=>h(k,$).then(T=>(A.forEach(E=>E[0]?.(T)),T)).catch(T=>(A.forEach(E=>E[1]?.(T)),T)))))},del:s,has:i,set:f,get:h,open,download:async(g,$)=>{if(!new Map(Array.from(r.entries()).map(([k,A])=>[A,k])).has(g))try{if(!new URL(g).protocol.includes("blob"))throw new Error("Is not blob")}catch{g=await h(g)}return F("GET",g).withDownload($).default()},setTtl(g){return p=Number(g),this},withForceCache(){return a=!0,this}}};var fe=(()=>{let n=null,r=()=>{let c=document.getElementById("video-love-stroy");if(!c||!c.hasAttribute("data-src"))return c?.remove(),M.complete("video",!0),Promise.resolve();let p=c.getAttribute("data-src");if(!p)return M.complete("video",!0),Promise.resolve();let a=document.createElement("video");a.className=c.getAttribute("data-vid-class"),a.loop=!0,a.muted=!0,a.controls=!1,a.autoplay=!1,a.playsInline=!0,a.preload="metadata";let f=new IntersectionObserver(h=>h.forEach(y=>y.isIntersecting?a.play():a.pause())),i=h=>{a.preload="auto",a.controls=!0,a.disableRemotePlayback=!0,a.disablePictureInPicture=!0,a.controlsList="noremoteplayback nodownload noplaybackrate",a.src=URL.createObjectURL(h)},s=()=>{let h=document.getElementById("progress-bar-video-love-stroy"),y=document.getElementById("progress-info-video-love-stroy");return F("GET",p).withNoBody().default({Range:"bytes=0-1"}).then(o=>{if(o.status===200)return a.preload="none",a.src=u.escapeHtml(p),c.appendChild(a),Promise.resolve();if(o.status!==206)throw new Error("failed to fetch video");a.addEventListener("error",()=>M.invalid("video"));let g=new Promise($=>a.addEventListener("loadedmetadata",$,{once:!0}));return a.src=u.escapeHtml(p),c.appendChild(a),g}).then(()=>{a.pause(),a.currentTime=0,M.complete("video");let o=a.getBoundingClientRect().width*(a.videoHeight/a.videoWidth);return a.style.height=`${o}px`,c.style.height=`${o}px`,F("GET",p).withRetry().withProgressFunc((g,$)=>{let C=Number(g/$*100).toFixed(0)+"%";h.style.width=C,y.innerText=C}).default()}).then(o=>o.clone().blob().then(g=>{let $=new Promise(C=>a.addEventListener("loadedmetadata",C,{once:!0}));return i(g),a.load(),$.then(()=>o)})).catch(o=>{h.style.backgroundColor="red",y.innerText="Error loading video",console.error(o)})};return n.has(p).then(h=>h?h.blob().then(y=>{let o=new Promise(g=>a.addEventListener("loadedmetadata",g,{once:!0}));return i(y),c.appendChild(a),o.then(()=>M.complete("video"))}):n.del(p).then(s).then(y=>n.set(p,y))).then(()=>{f.observe(a),a.style.removeProperty("height"),c.style.removeProperty("height"),document.getElementById("video-love-stroy-loading")?.remove()})};return{init:()=>(M.add(),n=J("video").withForceCache(),{load:r})}})();var ge=(()=>{let n=null,r=null,m=[],c=o=>new Promise((g,$)=>{let C=new Image;C.onload=()=>g(C),C.onerror=$,C.src=o}),p=(o,g)=>c(g).then($=>{o.width=$.naturalWidth,o.height=$.naturalHeight,o.classList.remove("opacity-0"),o.src=$.src,$.remove(),M.complete("image")}),a=o=>{m.push({url:o.getAttribute("data-src"),res:g=>p(o,g),rej:g=>{console.error(g),M.invalid("image")}})},f=o=>{o.onerror=()=>M.invalid("image"),o.onload=()=>{o.width=o.naturalWidth,o.height=o.naturalHeight,M.complete("image")},o.complete&&o.naturalWidth!==0&&o.naturalHeight!==0?M.complete("image"):o.complete&&M.invalid("image")},i=()=>Array.from(n).some(o=>o.hasAttribute("data-src")),s=async()=>{let o=Array.from(n),g=async $=>{m.length=0,o.filter($).forEach(C=>C.hasAttribute("data-src")?a(C):f(C)),await r.run(m,M.getAbort())};await g($=>$.hasAttribute("fetchpriority")),await g($=>!$.hasAttribute("fetchpriority"))},h=o=>{r.download(o,`${window.location.hostname}_image_${Date.now()}`)};return{init:()=>(r=J("image").withForceCache(),n=document.querySelectorAll("img"),n.forEach(M.add),{load:s,download:h,hasDataSrc:i})}})();var pe=(()=>{let n='<i class="fa-solid fa-circle-pause spin-button"></i>',r='<i class="fa-solid fa-circle-play"></i>',m=async(p=!0)=>{let a=document.body.getAttribute("data-audio");if(!a){M.complete("audio",!0);return}let f=null;try{f=new Audio(await J("audio").withForceCache().get(a,M.getAbort())),f.loop=!0,f.muted=!1,f.autoplay=!1,f.controls=!1;let o=document.body.getAttribute("data-audio-volume");f.volume=o?parseFloat(o):.3,M.complete("audio")}catch{M.invalid("audio");return}let i=!1,s=document.getElementById("button-music"),h=async()=>{if(!(!navigator.onLine||!s)){s.disabled=!0;try{await f.play(),i=!0,s.disabled=!1,s.innerHTML=n}catch(o){i=!1,u.notify(o).error()}}},y=()=>{i=!1,f.pause(),s.innerHTML=r};document.addEventListener("undangan.open",()=>{s.classList.remove("d-none"),p&&h()}),s.addEventListener("offline",y),s.addEventListener("click",()=>i?y():h())};return{init:()=>(M.add(),{load:m})}})();var he={tab:m=>window.bootstrap.Tab.getOrCreateInstance(document.getElementById(m)),modal:m=>window.bootstrap.Modal.getOrCreateInstance(document.getElementById(m))};var Ae=n=>{let r="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css",m="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js",c=()=>n.get(r).then(a=>new Promise((f,i)=>{let s=document.createElement("link");s.onload=f,s.onerror=i,s.rel="stylesheet",s.href=a,document.head.appendChild(s)})),p=()=>n.get(m).then(a=>new Promise((f,i)=>{let s=document.createElement("script");s.onload=f,s.onerror=i,s.src=a,document.head.appendChild(s)}));return Promise.all([c(),p()]).then(()=>{if(typeof window.AOS>"u")throw new Error("AOS library failed to load");window.AOS.init()})},Le=n=>n.get("https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.js").then(m=>new Promise((c,p)=>{let a=document.createElement("script");a.onerror=p,a.onload=()=>{typeof window.confetti>"u"?p(new Error("Confetti library failed to load")):c()},a.src=m,document.head.appendChild(a)})),Ie=n=>{let r=[{css:"https://fonts.googleapis.com/css2?family=Sacramento&display=swap",family:"Sacramento"},{css:"https://fonts.googleapis.com/css2?family=Noto+Naskh+Arabic&display=swap",family:"Noto Naskh Arabic"}],m=({css:c,family:p})=>n.get(c).then(a=>new Promise((f,i)=>{let s=document.createElement("link");s.onload=f,s.onerror=i,s.rel="stylesheet",s.href=a,document.head.appendChild(s)})).then(()=>document.fonts.load(`1em "${p}"`));return Promise.all(r.map(m))},be=(n={})=>{let r=[],m=J("libs").withForceCache();return(n?.aos??!0)&&r.push(Ae(m)),(n?.confetti??!0)&&r.push(Le(m)),(n?.additionalFont??!0)&&r.push(Ie(m)),Promise.all(r)};var O=n=>{let r=(f=null)=>{let i=JSON.parse(localStorage.getItem(n));return f?i[String(f)]:i},m=(f,i)=>{let s=r();s[String(f)]=i,localStorage.setItem(n,JSON.stringify(s))},c=f=>Object.keys(r()).includes(String(f)),p=f=>{if(!c(f))return;let i=r();delete i[String(f)],localStorage.setItem(n,JSON.stringify(i))},a=()=>localStorage.setItem(n,"{}");return localStorage.getItem(n)||a(),{set:m,get:r,has:c,clear:a,unset:p}};var Z=(()=>{let n={"#000000":"#ffffff","#ffffff":"#000000","#212529":"#f8f9fa","#f8f9fa":"#212529"},r=["#ffffff","#f8f9fa"],m=["#000000","#212529"],c=!1,p=null,a=null,f=()=>p.set("active","light"),i=()=>p.set("active","dark"),s=A=>{let T=a.getAttribute("content");a.setAttribute("content",A.some(E=>E===T)?n[T]:T)},h=()=>{f(),document.documentElement.setAttribute("data-bs-theme","light"),s(m)},y=()=>{i(),document.documentElement.setAttribute("data-bs-theme","dark"),s(r)},o=(A=null,T=null)=>{let E=p.get("active")==="dark";return A&&T?E?A:T:E};return{init:()=>{switch(p=O("theme"),a=document.querySelector('meta[name="theme-color"]'),p.has("active")||(window.matchMedia("(prefers-color-scheme: dark)").matches?i():f()),document.documentElement.getAttribute("data-bs-theme")){case"dark":i();break;case"light":f();break;default:c=!0}o()?y():h()},spyTop:()=>{let A=E=>E.filter(d=>d.isIntersecting).forEach(d=>{let e=d.target.classList.contains("bg-white-black")?o(m[0],r[0]):o(m[1],r[1]);a.setAttribute("content",e)}),T=new IntersectionObserver(A,{rootMargin:"0% 0% -95% 0%"});document.querySelectorAll("section").forEach(E=>T.observe(E))},change:()=>o()?h():y(),isDarkMode:o,isAutoMode:()=>c}})();var W=(()=>{let n={id:"ID",en:"US",fr:"FR",de:"DE",es:"ES",zh:"CN",ja:"JP",ko:"KR",ar:"SA",ru:"RU",it:"IT",nl:"NL",pt:"PT",tr:"TR",th:"TH",vi:"VN",ms:"MY",hi:"IN"},r=null,m=null,c=null,p=null;return{on(a,f){return p.set(a,f),this},get(){let a=p.get(c);return p.clear(),a},getCountry(){return r},getLocale(){return m},getLanguage(){return c},setDefault(a){let f=!0;n[a]||(f=!1,console.warn("Language not found, please add manually in countryMapping")),r=f?n[a]:"US",c=f?a:"en",m=`${c}_${r}`},init(){p=new Map,this.setDefault(navigator.language.split("-").shift())}}})();var z=(()=>{let n=({uuid:y,own:o,name:g,presence:$,comment:C,created_at:k,is_admin:A,is_parent:T,gif_url:E,ip:d,user_agent:e,comments:t,like_count:l})=>({uuid:y,own:o,name:g,presence:$,comment:C,created_at:k,is_admin:A??!1,is_parent:T,gif_url:E,ip:d,user_agent:e,comments:t?.map(n)??[],like_count:l??0}),r=y=>y.map(n);return{uuidResponse:({uuid:y})=>({uuid:y}),tokenResponse:({token:y})=>({token:y}),statusResponse:({status:y})=>({status:y}),getCommentResponse:n,getCommentsResponse:r,getCommentsResponseV2:y=>({count:y.count,lists:r(y.lists)}),commentShowMore:(y,o=!1)=>({uuid:y,show:o}),postCommentRequest:(y,o,g,$,C)=>({id:y,name:o,presence:g,comment:$,gif_id:C}),postSessionRequest:(y,o)=>({email:y,password:o}),updateCommentRequest:(y,o,g)=>({presence:y,comment:o,gif_id:g})}})();var q=(()=>{let n=null,r=()=>n.get("token"),m=y=>n.set("token",y),c=y=>F(X,"/api/session").body(y).send(z.tokenResponse).then(o=>(o.code===200&&m(o.data.token),o.code===200)),p=()=>n.unset("token"),a=()=>String(r()??".").split(".").length===3,f=y=>F("GET","/api/v2/config").withCache(1e3*60*30).withForceCache().token(y).send().then(o=>{if(o.code!==200)throw new Error("failed to get config.");let g=O("config");for(let[$,C]of Object.entries(o.data))g.set($,C);return m(y),o}),i=()=>{if(!a())return null;try{return JSON.parse(u.base64Decode(r().split(".")[1]))}catch{return null}};return{init:()=>{n=O("session")},guest:f,isValid:()=>a()?(i()?.exp??0)>Date.now()/1e3:!1,login:c,logout:p,decode:i,isAdmin:a,setToken:m,getToken:r}})();var ye=(()=>{let n=null,r=!0,m=["input[data-offline-disabled]","button[data-offline-disabled]","select[data-offline-disabled]","textarea[data-offline-disabled]"],c=()=>r,p=()=>{let o=n.firstElementChild.firstElementChild;o.classList.remove("bg-success"),o.classList.add("bg-danger"),o.firstElementChild.innerHTML='<i class="fa-solid fa-ban me-2"></i>Koneksi tidak tersedia'},a=()=>{let o=n.firstElementChild.firstElementChild;o.classList.remove("bg-danger"),o.classList.add("bg-success"),o.firstElementChild.innerHTML='<i class="fa-solid fa-cloud me-2"></i>Koneksi tersedia kembali'},f=async()=>{r&&(await u.changeOpacity(n,!1),p())},i=()=>{document.querySelectorAll(m.join(", ")).forEach(o=>{o.dispatchEvent(new Event(c()?"online":"offline")),o.setAttribute("data-offline-disabled",c()?"false":"true"),o.tagName==="BUTTON"?c()?o.classList.remove("disabled"):o.classList.add("disabled"):c()?o.removeAttribute("disabled"):o.setAttribute("disabled","true")})},s=()=>{r=!1,p(),u.changeOpacity(n,!0),i()},h=()=>{r=!0,a(),u.timeOut(f,3e3),i()};return{init:()=>{window.addEventListener("online",h),window.addEventListener("offline",s),n=document.createElement("div"),n.classList.add("fixed-top","pe-none"),n.style.cssText="opacity: 0; z-index: 1057;",n.innerHTML=`
        <div class="d-flex justify-content-center mx-auto">
            <div class="d-flex justify-content-center align-items-center rounded-pill my-2 bg-danger shadow">
                <small class="text-center py-1 px-2 mx-1 mt-1 mb-0 text-white" style="font-size: 0.8rem;"></small>
            </div>
        </div>`,document.body.insertBefore(n,document.body.lastChild)},isOnline:c}})();var le=(()=>{let n=null,r=()=>{if(n=window.invitationData,!n){console.error("[Invitation] Invitation data not found. Please include invitation-data.js before guest.js");return}console.log("[Invitation] Data loaded successfully"),n.event&&n.event.countdownDatetime&&(document.body.setAttribute("data-time",n.event.countdownDatetime),console.log("[Invitation] Countdown datetime set to:",n.event.countdownDatetime)),m()},m=()=>{let i=document.querySelectorAll("[data-invitation]");console.log(`[Invitation] Found ${i.length} elements to update`);let s=0,h=0;i.forEach(y=>{let o=y.getAttribute("data-invitation"),g=y.getAttribute("data-update-type")||"auto",$=c(o);if($!=null)try{p(y,$,g),s++}catch(C){console.error(`[Invitation] Error updating element with path '${o}':`,C),h++}else console.warn(`[Invitation] No value found for path: ${o}`),h++}),console.log(`[Invitation] Injection complete: ${s} successful, ${h} errors`)},c=i=>{if(!i||!n)return;let s=i.split("."),h=n;for(let y of s){if(h==null)return;let o=y.match(/^(\w+)\[(\d+)\]$/);if(o){let[,g,$]=o;if(h=h[g],Array.isArray(h))h=h[parseInt($,10)];else return}else h=h[y]}return h},p=(i,s,h)=>{switch(h){case"text":i.textContent=s;break;case"placeholder":i.placeholder=s;break;case"image":i.setAttribute("data-src",s);break;case"href":i.href=s;break;case"meta":i.content=s;break;case"data-message":i.dataset.message=s;break;case"data-copy":i.dataset.copy=s;break;case"auto":default:a(i,s);break}},a=(i,s)=>{let h=i.tagName;h==="IMG"?i.setAttribute("data-src",s):h==="A"||h==="LINK"&&i.hasAttribute("href")?i.href=s:h==="META"?i.content=s:h==="TITLE"?i.textContent=s:h==="INPUT"||h==="TEXTAREA"?i.hasAttribute("placeholder")?i.placeholder=s:i.value=s:h==="OPTION"?i.textContent=s:i.hasAttribute("data-copy")?(i.dataset.copy=s,i.querySelector("i")||(i.textContent=s)):i.textContent=s};return{init:r,get:()=>n}})();var H=(()=>{let n="default",r={128:2,256:3,512:4,768:5},m=null,c=null,p=null,a=null,f=(b,v,L=null)=>{let B=c.get(b);return v.map(N=>{let{id:D,media_formats:{tinygif:{url:U}},content_description:P}=N;B.pointer===-1||B.pointer===B.col-1?B.pointer=0:B.pointer++;let Q=B.lists.childNodes[B.pointer]??null;return Q?{url:U,res:ae=>{Q.insertAdjacentHTML("beforeend",`
                <figure class="hover-wrapper m-0 position-relative">
                    <button onclick="undangan.comment.gif.click(this, '${B.uuid}', '${D}', '${u.base64Encode(U)}')" class="btn hover-area position-absolute justify-content-center align-items-center top-0 end-0 bg-overlay-auto p-1 m-1 rounded-circle border shadow-sm z-1">
                        <i class="fa-solid fa-circle-check"></i>
                    </button>
                    <img src="${ae}" class="img-fluid" alt="${u.escapeHtml(P)}" style="width: 100%;">
                </figure>`),L?.step()}}:null})},i=b=>m.get(b),s=b=>{let v=c.get(b),L=v.lists,B=document.getElementById(`gif-loading-${v.uuid}`),N=document.getElementById(`progress-bar-${v.uuid}`),D=document.getElementById(`progress-info-${v.uuid}`),U=0,P=0;L.setAttribute("data-continue","false"),L.classList.replace("overflow-y-scroll","overflow-y-hidden");let Q=150,se=!1,ae=setTimeout(()=>{se||(D.innerText=`${P}/${U}`,L.classList.contains("d-none")||B.classList.replace("d-none","d-flex"))},Q);return{release:()=>{se=!0,clearTimeout(ae),L.classList.contains("d-none")||B.classList.replace("d-flex","d-none"),N.style.width="0%",D.innerText=`${P}/${U}`,L.setAttribute("data-continue","true"),L.classList.replace("overflow-y-hidden","overflow-y-scroll")},until:xe=>{U=xe,D.innerText=`${P}/${U}`},step:()=>{P+=1,D.innerText=`${P}/${U}`,N.style.width=Math.min(P/U*100,100).toString()+"%"}}},h=(b,v,L)=>{L={media_filter:"tinygif",client_key:"undangan_app",key:a.get("tenor_key"),country:W.getCountry(),locale:W.getLocale(),...L??{}};let B=Object.keys(L).filter(P=>L[P]!==null&&L[P]!==void 0).map(P=>`${P}=${encodeURIComponent(L[P])}`).join("&"),N=s(b),D=c.get(b),U=new Promise(P=>{D.reqs.push(P)});D.last=F("GET",`https://tenor.googleapis.com/v2${v}?${B}`).withCache().withRetry().withCancel(U).default(te).then(P=>P.json()).then(P=>{if(P.error)throw new Error(P.error.message);return P.results.length===0?P:(D.next=P?.next,N.until(P.results.length),D.gifs.push(...P.results),m.run(f(b,P.results,N),U))}).catch(P=>{P.name===ee?console.warn("Fetch abort:",P):u.notify(P).error()}).finally(()=>N.release())},y=b=>(b=u.escapeHtml(b),`
        <label for="gif-search-${b}" class="form-label my-1"><i class="fa-solid fa-photo-film me-2"></i>Gif</label>

        <div class="d-flex mb-3" id="gif-search-nav-${b}">
            <button class="btn btn-secondary btn-sm rounded-4 shadow-sm me-1 my-1" onclick="undangan.comment.gif.back(this, '${b}')" data-offline-disabled="false"><i class="fa-solid fa-arrow-left"></i></button>
            <input dir="auto" type="text" name="gif-search" id="gif-search-${b}" autocomplete="on" class="form-control shadow-sm rounded-4" placeholder="Search for a GIF on Tenor" data-offline-disabled="false">
        </div>

        <div class="position-relative">
            <div class="position-absolute d-flex flex-column justify-content-center align-items-center top-50 start-50 translate-middle w-100 h-100 bg-overlay-auto rounded-4 z-3" id="gif-loading-${b}">
                <div class="progress w-25" role="progressbar" style="height: 0.5rem;" aria-label="progress bar">
                    <div class="progress-bar" id="progress-bar-${b}" style="width: 0%"></div>
                </div>
                <small class="mt-1 text-theme-auto bg-theme-auto py-0 px-2 rounded-4" id="progress-info-${b}" style="font-size: 0.7rem;"></small>
            </div>
            <div id="gif-lists-${b}" class="d-flex rounded-4 p-0 overflow-y-scroll border" data-continue="true" style="height: 15rem;"></div>
        </div>

        <figure class="d-flex m-0 position-relative" id="gif-result-${b}">
            <button onclick="undangan.comment.gif.cancel('${b}')" id="gif-cancel-${b}" class="btn d-none position-absolute justify-content-center align-items-center top-0 end-0 bg-overlay-auto p-2 m-0 rounded-circle border shadow-sm z-1">
                <i class="fa-solid fa-circle-xmark"></i>
            </button>
        </figure>`),o=async b=>{let v=c.get(b);v.reqs.forEach(L=>L()),v.reqs.length=0,v.last&&(await v.last,v.last=null)},g=async b=>{await o(b);let v=c.get(b),L=v.col??0,B=0;for(let[N,D]of Object.entries(r))B=D,v.lists.clientWidth>=parseInt(N)&&(v.col=B);if(v.col===null&&(v.col=B),L!==v.col&&(v.pointer=-1,v.limit=v.col*5,v.lists.innerHTML='<div class="d-flex flex-column"></div>'.repeat(v.col),v.gifs.length!==0)){try{await m.run(f(b,v.gifs))}catch{v.gifs.length=0}L!==v.col&&v.lists.scroll({top:v.lists.scrollHeight,behavior:"instant"}),v.gifs.length===0&&await g(b)}},$=async b=>{let v=c.get(b);if(v.lists.getAttribute("data-continue")!=="true"||!v.next||v.next.length===0)return;let L=v.query&&v.query.trim().length>0,B={pos:v.next,limit:v.limit};L&&(B.q=v.query),v.lists.scrollTop>(v.lists.scrollHeight-v.lists.clientHeight)*.8&&(await g(b),h(b,L?"/search":"/featured",B))},C=async(b,v=null)=>{let L=c.get(b);L.query=v!==null?v:L.query,(!L.query||L.query.trim().length===0)&&(L.query=null),L.col=null,L.next=null,L.pointer=-1,L.gifs.length=0,await g(b),h(b,L.query===null?"/featured":"/search",{q:L.query,limit:L.limit})},k=async(b,v,L,B)=>{let N=u.disableButton(b,u.loader.replace("me-1","me-0"),!0),D=document.getElementById(`gif-result-${v}`);D.setAttribute("data-id",L),D.querySelector(`#gif-cancel-${v}`).classList.replace("d-none","d-flex"),D.insertAdjacentHTML("beforeend",`<img src="${await i(u.base64Decode(B))}" class="img-fluid mx-auto gif-image rounded-4" alt="selected-gif">`),N.restore(),c.get(v).lists.classList.replace("d-flex","d-none"),document.getElementById(`gif-search-nav-${v}`).classList.replace("d-flex","d-none")},A=b=>{let v=document.getElementById(`gif-result-${b}`);v.removeAttribute("data-id"),v.querySelector(`#gif-cancel-${b}`).classList.replace("d-flex","d-none"),v.querySelector("img").remove(),c.get(b).lists.classList.replace("d-none","d-flex"),document.getElementById(`gif-search-nav-${b}`).classList.replace("d-none","d-flex")},T=async(b=null)=>{b?c.has(b)&&(await o(b),p.delete(b),c.delete(b)):(await Promise.allSettled(Array.from(c.keys()).map(v=>o(v))),p.clear(),c.clear())},E=async(b,v)=>{let L=u.disableButton(b,u.loader.replace("me-1","me-0"),!0);await o(v),L.restore(),document.getElementById(`gif-form-${v}`).classList.toggle("d-none",!0),document.getElementById(`comment-form-${v}`)?.classList.toggle("d-none",!1)},d=b=>{if(!c.has(b)){u.safeInnerHTML(document.getElementById(`gif-form-${b}`),y(b));let v=document.getElementById(`gif-lists-${b}`);c.set(b,{uuid:b,lists:v,last:null,limit:null,query:null,next:null,col:null,pointer:-1,gifs:[],reqs:[]});let L=u.debounce($,150);v.addEventListener("scroll",()=>L(b));let B=u.debounce(C,850);document.getElementById(`gif-search-${b}`).addEventListener("input",N=>B(b,N.target.value))}return document.getElementById(`gif-form-${b}`).classList.toggle("d-none",!1),document.getElementById(`comment-form-${b}`)?.classList.toggle("d-none",!0),p.has(b)&&p.get(b)(),C(b)},e=b=>{let v=document.getElementById(`gif-form-${b}`);return v&&!v.classList.contains("d-none")},t=b=>document.getElementById(`gif-result-${b}`)?.getAttribute("data-id"),l=b=>document.querySelector(`[for="gif-search-${b}"]`)?.remove(),w=b=>document.querySelector(`[onclick="undangan.comment.gif.back(this, '${b}')"]`)?.remove(),x=(b,v)=>p.set(b,v),I=(b=null)=>{let v=document.getElementById(`gif-cancel-${b||n}`);return{show:()=>v.classList.replace("d-none","d-flex"),hide:()=>v.classList.replace("d-flex","d-none"),click:()=>v.dispatchEvent(new Event("click"))}},S=()=>!!a.get("tenor_key"),R=()=>{document.querySelector('[onclick="undangan.comment.gif.open(undangan.comment.gif.default)"]')?.classList.toggle("d-none",!a.get("tenor_key"))};return{default:n,init:()=>{m=J("gif"),c=new Map,p=new Map,a=O("config"),document.addEventListener("undangan.session",R)},get:i,back:E,open:d,cancel:A,click:k,remove:T,isOpen:e,onOpen:x,isActive:S,getResultId:t,buttonCancel:I,removeGifSearch:l,removeButtonBack:w}})();var G=(()=>{let n=null,r=null,m=null,c=null,p=300,a=()=>`
        <div class="bg-theme-auto shadow p-3 mx-0 mt-0 mb-3 rounded-4">
            <div class="d-flex justify-content-between align-items-center placeholder-wave">
                <span class="placeholder bg-secondary col-5 rounded-3 my-1"></span>
                <span class="placeholder bg-secondary col-3 rounded-3 my-1"></span>
            </div>
            <hr class="my-1">
            <p class="placeholder-wave m-0">
                <span class="placeholder bg-secondary col-6 rounded-3"></span>
                <span class="placeholder bg-secondary col-5 rounded-3"></span>
                <span class="placeholder bg-secondary col-12 rounded-3 my-1"></span>
            </p>
        </div>`,f=e=>`
        <button style="font-size: 0.8rem;" onclick="undangan.comment.like.love(this)" data-uuid="${e.uuid}" class="btn btn-sm btn-outline-auto ms-auto rounded-3 p-0 shadow-sm d-flex justify-content-start align-items-center" data-offline-disabled="false">
            <span class="my-0 mx-1" data-count-like="${e.like_count}">${e.like_count}</span>
            <i class="me-1 ${r.has(e.uuid)?"fa-solid fa-heart text-danger":"fa-regular fa-heart"}"></i>
        </button>`,i=e=>{let t=`<div class="d-flex justify-content-start align-items-center" data-button-action="${e.uuid}">`;return m.get("can_reply")!==!1&&(t+=`<button style="font-size: 0.8rem;" onclick="undangan.comment.reply('${e.uuid}')" class="btn btn-sm btn-outline-auto rounded-4 py-0 me-1 shadow-sm" data-offline-disabled="false">Reply</button>`),q.isAdmin()&&e.is_admin&&(!e.gif_url||H.isActive())?t+=`<button style="font-size: 0.8rem;" onclick="undangan.comment.edit(this, ${e.is_parent?"true":"false"})" data-uuid="${e.uuid}" class="btn btn-sm btn-outline-auto rounded-4 py-0 me-1 shadow-sm" data-own="${e.own}" data-offline-disabled="false">Edit</button>`:n.has(e.uuid)&&m.get("can_edit")!==!1&&(!e.gif_url||H.isActive())&&(t+=`<button style="font-size: 0.8rem;" onclick="undangan.comment.edit(this, ${e.is_parent?"true":"false"})" data-uuid="${e.uuid}" class="btn btn-sm btn-outline-auto rounded-4 py-0 me-1 shadow-sm" data-offline-disabled="false">Edit</button>`),q.isAdmin()?t+=`<button style="font-size: 0.8rem;" onclick="undangan.comment.remove(this)" data-uuid="${e.uuid}" class="btn btn-sm btn-outline-auto rounded-4 py-0 me-1 shadow-sm" data-own="${e.own}" data-offline-disabled="false">Delete</button>`:n.has(e.uuid)&&m.get("can_delete")!==!1&&(t+=`<button style="font-size: 0.8rem;" onclick="undangan.comment.remove(this)" data-uuid="${e.uuid}" class="btn btn-sm btn-outline-auto rounded-4 py-0 me-1 shadow-sm" data-offline-disabled="false">Delete</button>`),t+="</div>",t},s=(e,t)=>{e=u.escapeHtml(e);let l=c.get("show").includes(e);return`<a class="text-theme-auto" style="font-size: 0.8rem;" onclick="undangan.comment.showOrHide(this)" data-uuid="${e}" data-uuids="${u.escapeHtml(t.join(","))}" data-show="${l?"true":"false"}" role="button" class="me-auto ms-1 py-0">${l?"Hide replies":`Show replies (${t.length})`}</a>`},h=e=>`
        <div class="d-flex justify-content-between align-items-center" id="button-${e.uuid}">
            ${i(e)}
            ${e.comments.length>0?s(e.uuid,e.comments.map(t=>t.uuid)):""}
            ${f(e)}
        </div>`,y=e=>!e.ip||!e.user_agent||e.is_admin?"":`
        <div class="mb-1 mt-3">
            <p class="text-theme-auto mb-1 mx-0 mt-0 p-0" style="font-size: 0.7rem;" id="ip-${e.uuid}"><i class="fa-solid fa-location-dot me-1"></i>${u.escapeHtml(e.ip)} <span class="mb-1 placeholder col-2 rounded-3"></span></p>
            <p class="text-theme-auto m-0 p-0" style="font-size: 0.7rem;"><i class="fa-solid fa-mobile-screen-button me-1"></i>${u.parseUserAgent(u.escapeHtml(e.user_agent))}</p>
        </div>`,o=e=>e.is_parent?'class="bg-theme-auto shadow p-3 mx-0 mt-0 mb-3 rounded-4"':`class="${c.get("hidden").find(t=>t.uuid===e.uuid).show?"":"d-none"} overflow-x-auto mw-100 border-start bg-theme-auto py-2 ps-2 pe-0 my-2 ms-2 me-0"`,g=e=>e.is_admin?`<strong class="me-1">${u.escapeHtml(e.name)}</strong><i class="fa-solid fa-certificate text-primary"></i>`:e.is_parent?`<strong class="me-1">${u.escapeHtml(e.name)}</strong><i id="badge-${e.uuid}" data-is-presence="${e.presence?"true":"false"}" class="fa-solid ${e.presence?"fa-circle-check text-success":"fa-circle-xmark text-danger"}"></i>`:`<strong>${u.escapeHtml(e.name)}</strong>`,$=async e=>{let t=`
        <div class="d-flex justify-content-between align-items-center">
            <p class="text-theme-auto text-truncate m-0 p-0" style="font-size: 0.95rem;">${g(e)}</p>
            <small class="text-theme-auto m-0 p-0" style="font-size: 0.75rem;">${e.created_at}</small>
        </div>
        <hr class="my-1">`;if(e.gif_url)return t+`
            <div class="d-flex justify-content-center align-items-center my-2">
                <img src="${await H.get(e.gif_url)}" id="img-gif-${e.uuid}" class="img-fluid mx-auto gif-image rounded-4" alt="selected-gif">
            </div>`;let l=e.comment.length>p,w=u.convertMarkdownToHTML(u.escapeHtml(l?e.comment.slice(0,p)+"...":e.comment));return t+`
        <p dir="auto" class="text-theme-auto my-1 mx-0 p-0" style="white-space: pre-wrap !important; font-size: 0.95rem;" data-comment="${u.base64Encode(e.comment)}" id="content-${e.uuid}">${w}</p>
        ${l?`<p class="d-block mb-2 mt-0 mx-0 p-0"><a class="text-theme-auto" role="button" style="font-size: 0.85rem;" data-show="false" onclick="undangan.comment.showMore(this, '${e.uuid}')">Selengkapnya</a></p>`:""}`},C=async e=>{let t=await $(e),l=await Promise.all(e.comments.map(w=>C(w)));return`
        <div ${o(e)} id="${e.uuid}" style="overflow-wrap: break-word !important;">
            <div id="body-content-${e.uuid}" data-tapTime="0" data-liked="false" tabindex="0">${t}</div>
            ${y(e)}
            ${h(e)}
            <div id="reply-content-${e.uuid}">${l.join("")}</div>
        </div>`};return{init:()=>{n=O("owns"),r=O("likes"),m=O("config"),c=O("comment")},renderEdit:(e,t,l,w)=>{e=u.escapeHtml(e);let x=document.createElement("div");x.classList.add("my-2"),x.id=`inner-${e}`;let I=`
        <p class="my-1 mx-0 p-0" style="font-size: 0.95rem;"><i class="fa-solid fa-pen me-2"></i>Edit</p>
        ${l?`
        <select class="form-select shadow-sm mb-2 rounded-4" id="form-inner-presence-${e}" data-offline-disabled="false">
            <option value="1" ${t?"selected":""}>&#9989; Datang</option>
            <option value="2" ${t?"":"selected"}>&#10060; Berhalangan</option>
        </select>`:""}
        ${w?`${H.isActive()?`<div class="d-none mb-2" id="gif-form-${e}"></div>`:""}`:`<textarea dir="auto" class="form-control shadow-sm rounded-4 mb-2" id="form-inner-${e}" minlength="1" maxlength="1000" placeholder="Type update comment" rows="3" data-offline-disabled="false"></textarea>    
        `}
        <div class="d-flex justify-content-end align-items-center mb-0">
            <button style="font-size: 0.8rem;" onclick="undangan.comment.cancel(this, '${e}')" class="btn btn-sm btn-outline-auto rounded-4 py-0 me-1" data-offline-disabled="false">Cancel</button>
            <button style="font-size: 0.8rem;" onclick="undangan.comment.update(this)" data-uuid="${e}" class="btn btn-sm btn-outline-auto rounded-4 py-0" data-offline-disabled="false">Update</button>
        </div>`;return u.safeInnerHTML(x,I)},renderReply:e=>{e=u.escapeHtml(e);let t=document.createElement("div");t.classList.add("my-2"),t.id=`inner-${e}`;let l=`
        <p class="my-1 mx-0 p-0" style="font-size: 0.95rem;"><i class="fa-solid fa-reply me-2"></i>Reply</p>
        <div class="d-block mb-2" id="comment-form-${e}">
            <div class="position-relative">
                ${H.isActive()?`<button class="btn btn-secondary btn-sm rounded-4 shadow-sm me-1 my-1 position-absolute bottom-0 end-0" onclick="undangan.comment.gif.open('${e}')" aria-label="button gif" data-offline-disabled="false"><i class="fa-solid fa-photo-film"></i></button>`:""}
                <textarea dir="auto" class="form-control shadow-sm rounded-4 mb-2" id="form-inner-${e}" minlength="1" maxlength="1000" placeholder="Type reply comment" rows="3" data-offline-disabled="false"></textarea>
            </div>
        </div>
        <div class="d-none mb-2" id="gif-form-${e}"></div>
        <div class="d-flex justify-content-end align-items-center mb-0">
            <button style="font-size: 0.8rem;" onclick="undangan.comment.cancel(this, '${e}')" class="btn btn-sm btn-outline-auto rounded-4 py-0 me-1" data-offline-disabled="false">Cancel</button>
            <button style="font-size: 0.8rem;" onclick="undangan.comment.send(this)" data-uuid="${e}" class="btn btn-sm btn-outline-auto rounded-4 py-0" data-offline-disabled="false">Send</button>
        </div>`;return u.safeInnerHTML(t,l)},renderLoading:a,renderReadMore:s,renderContentMany:e=>Promise.all(e.map(t=>C(t))).then(t=>t.join("")),renderContentSingle:e=>C(e),maxCommentLength:p}})();var we=()=>window.confetti.shapeFromPath({path:"M167 72c19,-38 37,-56 75,-56 42,0 76,33 76,75 0,76 -76,151 -151,227 -76,-76 -151,-151 -151,-227 0,-42 33,-75 75,-75 38,0 57,18 76,56z",matrix:[.03333333333333333,0,0,.03333333333333333,-5.566666666666666,-5.533333333333333]}),ve=()=>{window.confetti&&window.confetti({origin:{y:1},zIndex:1057})},Te=(n=15)=>{if(!window.confetti)return;let r=n*1e3,m=Date.now()+r,c=we(),p=["#FFC0CB","#FF1493","#C71585"],a=(i,s)=>Math.random()*(s-i)+i,f=()=>{let i=m-Date.now();p.forEach(s=>{window.confetti({particleCount:1,startVelocity:0,ticks:Math.max(50,75*(i/r)),origin:{x:Math.random(),y:Math.abs(Math.random()-i/r)},zIndex:1057,colors:[s],shapes:[c],drift:a(-.5,.5),gravity:a(.5,1),scalar:a(.5,1)})}),i>0&&requestAnimationFrame(f)};requestAnimationFrame(f)},ne=(n,r=50)=>{if(!window.confetti)return;let m=Date.now()+r,c=n.getBoundingClientRect(),p=Math.max(.3,Math.min(1,c.top/window.innerHeight+.2)),a=we(),f=["#FF69B4","#FF1493"],i=()=>{f.forEach(s=>{window.confetti({particleCount:2,angle:60,spread:55,shapes:[a],origin:{x:c.left/window.innerWidth,y:p},zIndex:1057,colors:[s]}),window.confetti({particleCount:2,angle:120,spread:55,shapes:[a],origin:{x:c.right/window.innerWidth,y:p},zIndex:1057,colors:[s]})}),Date.now()<m&&requestAnimationFrame(i)};requestAnimationFrame(i)};var K=(()=>{let n=null,r=null,m=async s=>{let h=s.firstElementChild,y=s.lastElementChild,o=s.getAttribute("data-uuid"),g=parseInt(h.getAttribute("data-count-like"));s.disabled=!0,navigator.vibrate&&navigator.vibrate(100),n.has(o)?await F(de,"/api/comment/"+n.get(o)).token(q.getToken()).send(z.statusResponse).then($=>{$.data.status&&(n.unset(o),y.classList.remove("fa-solid","text-danger"),y.classList.add("fa-regular"),h.setAttribute("data-count-like",String(g-1)))}).finally(()=>{h.innerText=h.getAttribute("data-count-like"),s.disabled=!1}):await F(X,"/api/comment/"+o).token(q.getToken()).send(z.uuidResponse).then($=>{$.code===201&&(n.set(o,$.data.uuid),y.classList.remove("fa-regular"),y.classList.add("fa-solid","text-danger"),h.setAttribute("data-count-like",String(g+1)))}).finally(()=>{h.innerText=h.getAttribute("data-count-like"),s.disabled=!1})},c=s=>document.querySelector(`button[onclick="undangan.comment.like.love(this)"][data-uuid="${s}"]`),p=async s=>{if(!navigator.onLine)return;let h=Date.now(),y=h-parseInt(s.getAttribute("data-tapTime")),o=s.id.replace("body-content-",""),g=y<300&&y>0,$=!n.has(o)&&s.getAttribute("data-liked")!=="true";g&&$&&(ne(s),s.setAttribute("data-liked","true"),await m(c(o)),s.setAttribute("data-liked","false")),s.setAttribute("data-tapTime",String(h))};return{init:()=>{r=new Map,n=O("likes")},love:m,getButtonLike:c,addListener:s=>{let h=new AbortController,y=document.getElementById(`body-content-${s}`);y.addEventListener("touchend",()=>p(y),{signal:h.signal}),r.set(s,h)},removeListener:s=>{let h=r.get(s);h&&(h.abort(),r.delete(s))}}})();var V=(()=>{let n=10,r=0,m=0,c=null,p=null,a=null,f=null,i=null,s=e=>{n=Number(e)},h=()=>n,y=()=>r,o=()=>m,g=()=>p.classList.contains("disabled")?null:p.classList.add("disabled"),$=()=>p.classList.contains("disabled")?p.classList.remove("disabled"):null,C=()=>a.classList.contains("disabled")?null:a.classList.add("disabled"),k=()=>a.classList.contains("disabled")?a.classList.remove("disabled"):null,A=e=>{C(),g();let t=u.disableButton(e,u.loader.replace("ms-0 me-1","mx-1"),!0),l=()=>{i.addEventListener("undangan.comment.done",()=>t.restore(),{once:!0}),i.addEventListener("undangan.comment.result",()=>i.scrollIntoView(),{once:!0}),i.dispatchEvent(new Event("undangan.comment.show"))};return{next:()=>{r+=n,e.innerHTML="Next"+e.innerHTML,l()},prev:()=>{r-=n,e.innerHTML=e.innerHTML+"Prev",l()}}};return{init:()=>{f=document.getElementById("pagination"),f.innerHTML=`
        <ul class="pagination mb-2 shadow-sm rounded-4">
            <li class="page-item disabled" id="previous">
                <button class="page-link rounded-start-4" onclick="undangan.comment.pagination.previous(this)" data-offline-disabled="false">
                    <i class="fa-solid fa-circle-left me-1"></i>Prev
                </button>
            </li>
            <li class="page-item disabled">
                <span class="page-link text-theme-auto" id="page"></span>
            </li>
            <li class="page-item" id="next">
                <button class="page-link rounded-end-4" onclick="undangan.comment.pagination.next(this)" data-offline-disabled="false">
                    Next<i class="fa-solid fa-circle-right ms-1"></i>
                </button>
            </li>
        </ul>`,i=document.getElementById("comments"),c=document.getElementById("page"),p=document.getElementById("previous"),a=document.getElementById("next")},setPer:s,getPer:h,getNext:y,reset:()=>r===0?!1:(r=0,C(),g(),!0),setTotal:e=>{if(m=Number(e),m<=n&&r===0){f.classList.add("d-none");return}let t=r/n+1,l=Math.ceil(m/n);if(c.innerText=`${t} / ${l}`,r>0&&$(),t>=l){C();return}k(),f.classList.contains("d-none")&&f.classList.remove("d-none")},geTotal:o,previous:e=>A(e).prev(),next:e=>A(e).next()}})();var oe=(()=>{let n=null,r=null,m=null,c=[],p=()=>`<div class="text-center p-4 mx-0 mt-0 mb-3 bg-theme-auto rounded-4 shadow"><p class="fw-bold p-0 m-0" style="font-size: 0.95rem;">${W.on("id","\u{1F4E2} Yuk, share undangan ini biar makin rame komentarnya! \u{1F389}").on("en","\u{1F4E2} Let's share this invitation to get more comments! \u{1F389}").get()}</p></div>`,a=(d,e)=>{document.querySelector(`[data-button-action="${d}"]`).childNodes.forEach(t=>{t.disabled=e})},f=d=>{a(d,!1),document.getElementById(`inner-${d}`).remove()},i=d=>{let e=d.getAttribute("data-uuids").split(","),t=d.getAttribute("data-show")==="true",l=d.getAttribute("data-uuid"),w=r.get("show");d.setAttribute("data-show",t?"false":"true"),d.innerText=t?`Show replies (${e.length})`:"Hide replies",r.set("show",t?w.filter(x=>x!==l):[...w,l]);for(let x of e)r.set("hidden",r.get("hidden").map(I=>(I.uuid===x&&(I.show=!t),I))),document.getElementById(x).classList.toggle("d-none",t)},s=(d,e)=>{let t=document.getElementById(`content-${e}`),l=u.base64Decode(t.getAttribute("data-comment")),w=d.getAttribute("data-show")==="false";u.safeInnerHTML(t,u.convertMarkdownToHTML(u.escapeHtml(w?l:l.slice(0,G.maxCommentLength)+"..."))),d.innerText=w?"Sebagian":"Selengkapnya",d.setAttribute("data-show",w?"true":"false")},h=async d=>{if(d.comments&&await Promise.all(d.comments.map(t=>h(t))),!d.ip||!d.user_agent||d.is_admin)return;let e=t=>{let l=document.getElementById(`ip-${u.escapeHtml(d.uuid)}`);u.safeInnerHTML(l,`<i class="fa-solid fa-location-dot me-1"></i>${u.escapeHtml(d.ip)} <strong>${u.escapeHtml(t)}</strong>`)};await F("GET",`https://apip.cc/api-json/${d.ip}`).withCache().withRetry().default().then(t=>t.json()).then(t=>{let l="localhost";t.status==="success"&&(t.City.length!==0&&t.RegionName.length!==0?l=t.City+" - "+t.RegionName:t.Capital.length!==0&&t.CountryName.length!==0&&(l=t.Capital+" - "+t.CountryName)),e(l)}).catch(t=>e(t.message))},y=(d,e=[])=>{let t=r.get("show"),l=x=>x.forEach(I=>{if(e.find(S=>S.uuid===I.uuid)){l(I.comments);return}e.push(z.commentShowMore(I.uuid)),l(I.comments)}),w=x=>x.forEach(I=>{if(!t.includes(I.uuid)){w(I.comments);return}I.comments.forEach(S=>{let R=e.findIndex(_=>_.uuid===S.uuid);R!==-1&&(e[R].show=!0)}),w(I.comments)});return l(d),w(d),e},o=()=>(c.forEach(d=>{K.removeListener(d)}),m.getAttribute("data-loading")==="false"&&(m.setAttribute("data-loading","true"),m.innerHTML=G.renderLoading().repeat(V.getPer())),F("GET",`/api/v2/comment?per=${V.getPer()}&next=${V.getNext()}&lang=${W.getLanguage()}`).token(q.getToken()).withCache(1e3*30).withForceCache().send(z.getCommentsResponseV2).then(async d=>{m.setAttribute("data-loading","false");for(let l of c)await H.remove(l);if(d.data.lists.length===0)return m.innerHTML=p(),d;let e=l=>l.flatMap(w=>[w.uuid,...e(w.comments)]);c.splice(0,c.length,...e(d.data.lists)),r.set("hidden",y(d.data.lists,r.get("hidden")));let t=await G.renderContentMany(d.data.lists);return d.data.lists.length<V.getPer()&&(t+=p()),u.safeInnerHTML(m,t),c.forEach(l=>{K.addListener(l)}),d}).then(async d=>(m.dispatchEvent(new Event("undangan.comment.result")),d.data.lists&&q.isAdmin()&&await Promise.all(d.data.lists.map(e=>h(e))),V.setTotal(d.data.count),m.dispatchEvent(new Event("undangan.comment.done")),d)));return{gif:H,like:K,pagination:V,init:()=>{H.init(),K.init(),G.init(),V.init(),m=document.getElementById("comments"),m.addEventListener("undangan.comment.show",o),n=O("owns"),r=O("comment"),r.has("hidden")||r.set("hidden",[]),r.has("show")||r.set("show",[])},send:async d=>{let e=d.getAttribute("data-uuid"),t=document.getElementById("form-name"),l=t.value;if(l.length===0){u.notify("Name cannot be empty.").warning(),e&&t.scrollIntoView({block:"center"});return}let w=document.getElementById("form-presence");if(!e&&w&&w.value==="0"){u.notify("Please select your attendance status.").warning();return}let x=H.isOpen(e||H.default),I=H.getResultId(e||H.default),S=H.buttonCancel(e);if(x&&!I){u.notify("Gif cannot be empty.").warning();return}x&&I&&S.hide();let R=document.getElementById(`form-${e?`inner-${e}`:"comment"}`);if(!x&&R.value?.trim().length===0){u.notify("Comments cannot be empty.").warning();return}!e&&t&&!q.isAdmin()&&(t.disabled=!0),!q.isAdmin()&&w&&w.value!=="0"&&(w.disabled=!0),R&&(R.disabled=!0);let _=document.querySelector(`[onclick="undangan.comment.cancel(this, '${e}')"]`);_&&(_.disabled=!0);let b=u.disableButton(d),v=w?w.value==="1":!0;if(!q.isAdmin()){let B=O("information");B.set("name",l),e||B.set("presence",v)}let L=await F(X,`/api/comment?lang=${W.getLanguage()}`).token(q.getToken()).body(z.postCommentRequest(e,l,v,x?null:R.value,I)).send(z.getCommentResponse);if(t&&(t.disabled=!1),R&&(R.disabled=!1),_&&(_.disabled=!1),w&&(w.disabled=!1),x&&I&&S.show(),b.restore(),!(!L||L.code!==201)){if(n.set(L.data.uuid,L.data.own),R&&(R.value=null),x&&I&&S.click(),!e){if(V.reset()){await o(),m.scrollIntoView();return}V.setTotal(V.geTotal()+1),m.children.length===V.getPer()&&m.lastElementChild.remove(),L.data.is_parent=!0,L.data.is_admin=q.isAdmin(),m.insertAdjacentHTML("afterbegin",await G.renderContentMany([L.data])),m.scrollIntoView()}if(e){r.set("hidden",r.get("hidden").concat([z.commentShowMore(L.data.uuid,!0)])),r.set("show",r.get("show").concat([e])),f(e),L.data.is_parent=!1,L.data.is_admin=q.isAdmin(),document.getElementById(`reply-content-${e}`).insertAdjacentHTML("beforeend",await G.renderContentSingle(L.data));let B=document.getElementById(`button-${e}`).querySelector("a");B&&(B.getAttribute("data-show")==="false"&&i(B),B.remove());let N=[L.data.uuid],D=document.createRange().createContextualFragment(G.renderReadMore(e,B?B.getAttribute("data-uuids").split(",").concat(N):N)),U=K.getButtonLike(e);U.parentNode.insertBefore(D,U)}K.addListener(L.data.uuid),c.push(L.data.uuid)}},edit:async(d,e)=>{let t=d.getAttribute("data-uuid");a(t,!0),q.isAdmin()&&n.set(t,d.getAttribute("data-own"));let l=document.getElementById(`badge-${t}`),w=!!l&&l.getAttribute("data-is-presence")==="true",x=document.getElementById(`img-gif-${t}`);x&&await H.remove(t);let I=e&&!q.isAdmin();if(document.getElementById(`button-${t}`).insertAdjacentElement("afterend",G.renderEdit(t,w,I,!!x)),x){H.onOpen(t,()=>{H.removeGifSearch(t),H.removeButtonBack(t)}),await H.open(t);return}let S=document.getElementById(`form-inner-${t}`),R=u.base64Decode(document.getElementById(`content-${t}`)?.getAttribute("data-comment"));S.value=R,S.setAttribute("data-original",u.base64Encode(R))},reply:d=>{a(d,!0),H.remove(d).then(()=>{H.onOpen(d,()=>H.removeGifSearch(d)),document.getElementById(`button-${d}`).insertAdjacentElement("afterend",G.renderReply(d))})},remove:async d=>{if(!u.ask("Are you sure?"))return;let e=d.getAttribute("data-uuid");q.isAdmin()&&n.set(e,d.getAttribute("data-own")),a(e,!0);let t=u.disableButton(d),l=K.getButtonLike(e);if(l.disabled=!0,!await F(me,"/api/comment/"+n.get(e)).token(q.getToken()).send(z.statusResponse).then(x=>x.data.status)){t.restore(),l.disabled=!1,a(e,!1);return}document.querySelectorAll('a[onclick="undangan.comment.showOrHide(this)"]').forEach(x=>{let I=x.getAttribute("data-uuids").split(",");if(I.includes(e)){let S=I.filter(R=>R!==e).join(",");S.length===0?x.remove():x.setAttribute("data-uuids",S)}}),n.unset(e),document.getElementById(e).remove(),m.children.length===0&&(m.innerHTML=p())},update:async d=>{let e=d.getAttribute("data-uuid"),t=!1,l=document.getElementById(`form-inner-presence-${e}`);l&&(l.disabled=!0,t=l.value==="1");let w=document.getElementById(`badge-${e}`),x=!!w&&w.getAttribute("data-is-presence")==="true",I=H.isOpen(e),S=H.getResultId(e),R=H.buttonCancel(e);I&&S&&R.hide();let _=document.getElementById(`form-inner-${e}`);if(e&&!I&&u.base64Encode(_.value)===_.getAttribute("data-original")&&x===t){f(e);return}if(!I&&_.value?.trim().length===0){u.notify("Comments cannot be empty.").warning();return}_&&(_.disabled=!0);let b=document.querySelector(`[onclick="undangan.comment.cancel(this, '${e}')"]`);b&&(b.disabled=!0);let v=u.disableButton(d),L=await F("PUT",`/api/comment/${n.get(e)}?lang=${W.getLanguage()}`).token(q.getToken()).body(z.updateCommentRequest(l?t:null,I?null:_.value,S)).send(z.statusResponse).then(B=>B.data.status);if(_&&(_.disabled=!1),b&&(b.disabled=!1),l&&(l.disabled=!1),v.restore(),I&&S&&R.show(),!!L){if(I&&S&&(document.getElementById(`img-gif-${e}`).src=document.getElementById(`gif-result-${e}`)?.querySelector("img").src,R.click()),f(e),!I){let B=document.querySelector(`[onclick="undangan.comment.showMore(this, '${e}')"]`),N=document.getElementById(`content-${e}`);N.setAttribute("data-comment",u.base64Encode(_.value));let D=u.convertMarkdownToHTML(u.escapeHtml(_.value));_.value.length>G.maxCommentLength?(u.safeInnerHTML(N,B?.getAttribute("data-show")==="false"?D.slice(0,G.maxCommentLength)+"...":D),B?.classList.replace("d-none","d-block")):(u.safeInnerHTML(N,D),B?.classList.replace("d-block","d-none"))}l&&(document.getElementById("form-presence").value=t?"1":"2",O("information").set("presence",t)),!(!l||!w)&&(w.classList.toggle("fa-circle-xmark",!t),w.classList.toggle("text-danger",!t),w.classList.toggle("fa-circle-check",t),w.classList.toggle("text-success",t))}},cancel:async(d,e)=>{let t=document.getElementById(`form-inner-presence-${e}`),l=t?t.value==="1":!1,w=document.getElementById(`badge-${e}`),x=w&&n.has(e)&&t?w.getAttribute("data-is-presence")==="true":!1,I=u.disableButton(d);if(H.isOpen(e)&&(!H.getResultId(e)&&x===l||u.ask("Are you sure?"))){await H.remove(e),f(e);return}let S=document.getElementById(`form-inner-${e}`);if(S.value.length===0||u.base64Encode(S.value)===S.getAttribute("data-original")&&x===l||u.ask("Are you sure?")){f(e);return}I.restore()},show:o,showMore:s,showOrHide:i}})();var Ee=(()=>{let n=null,r=null,m=()=>{let T=new Date(document.body.getAttribute("data-time").replace(" ","T")).getTime(),E=x=>x<10?`0${x}`:`${x}`,d=document.getElementById("day"),e=document.getElementById("hour"),t=document.getElementById("minute"),l=document.getElementById("second"),w=()=>{let x=Math.abs(T-Date.now());d.textContent=E(Math.floor(x/(1e3*60*60*24))),e.textContent=E(Math.floor(x%(1e3*60*60*24)/(1e3*60*60))),t.textContent=E(Math.floor(x%(1e3*60*60)/(1e3*60))),l.textContent=E(Math.floor(x%(1e3*60)/1e3)),u.timeOut(w,1e3-Date.now()%1e3)};u.timeOut(w)},c=()=>{let T=window.location.search.split("to="),E=null;if(T.length>1&&T[1].length>=1&&(E=window.decodeURIComponent(T[1])),E){let e=document.getElementById("guest-name"),t=document.createElement("div");t.classList.add("m-2");let l=`<small class="mt-0 mb-1 mx-0 p-0">${u.escapeHtml(e?.getAttribute("data-message"))}</small><p class="m-0 p-0" style="font-size: 1.25rem">${u.escapeHtml(E)}</p>`;u.safeInnerHTML(t,l),e?.appendChild(t)}let d=document.getElementById("form-name");d&&(d.value=n.get("name")??E)},p=async()=>{let E=document.querySelectorAll(".slide-desktop");if(!E||E.length===0)return;let d=document.getElementById("root")?.querySelector(".d-sm-block");if(!d||(d.dispatchEvent(new Event("undangan.slide.stop")),window.getComputedStyle(d).display==="none"))return;if(E.length===1){await u.changeOpacity(E[0],!0);return}let e=0;for(let[x,I]of E.entries())if(x===e){I.classList.add("slide-desktop-active"),await u.changeOpacity(I,!0);break}let t=!0,l=async()=>(await u.changeOpacity(E[e],!1),E[e].classList.remove("slide-desktop-active"),e=(e+1)%E.length,t&&(E[e].classList.add("slide-desktop-active"),await u.changeOpacity(E[e],!0)),t);d.addEventListener("undangan.slide.stop",()=>{t=!1});let w=async()=>{await l()&&u.timeOut(w,6e3)};u.timeOut(w,6e3)},a=T=>{T.disabled=!0;let E=document.querySelector("audio");E&&E.play().catch(d=>{console.warn("[Audio] Playback failed:",d)}),document.body.scrollIntoView({behavior:"instant"}),document.getElementById("root").classList.remove("opacity-0"),Z.isAutoMode()&&document.getElementById("button-theme").classList.remove("d-none"),p(),Z.spyTop(),ve(),u.timeOut(Te,1500),document.dispatchEvent(new Event("undangan.open")),u.changeOpacity(document.getElementById("welcome"),!1).then(d=>d.remove())},f=T=>{let E=document.getElementById("show-modal-image");E.src=T.src,E.width=T.width,E.height=T.height,he.modal("modal-image").show()},i=()=>{},s=T=>{navigator.vibrate&&navigator.vibrate(500),ne(T,100),u.changeOpacity(T,!1).then(E=>E.remove())},h=()=>n.set("info",!0),y=()=>{document.querySelectorAll(".font-arabic").forEach(T=>{T.innerHTML=String(T.innerHTML).normalize("NFC")})},o=()=>{document.querySelectorAll("svg").forEach(T=>{T.hasAttribute("data-class")&&u.timeOut(()=>T.classList.add(T.getAttribute("data-class")),parseInt(T.getAttribute("data-time")))})},g=()=>{let T=e=>new Date(e.replace(" ","T")+":00Z").toISOString().replace(/[-:]/g,"").split(".").shift(),E=new URL("https://calendar.google.com/calendar/render"),d=new URLSearchParams({action:"TEMPLATE",text:"The Wedding of Riana & Iqbal",dates:`${T("2023-03-15 10:00")}/${T("2023-03-15 11:00")}`,details:"Tanpa mengurangi rasa hormat, kami mengundang Anda untuk berkenan menghadiri acara pernikahan kami.",location:"Stasiun Magetan, Jl. Jiwan - Bar. No.14, Karangsono, Kec. Bar., Kabupaten Magetan, Jawa Timur 63395",ctz:r.get("tz")});E.search=d.toString(),document.querySelector("#home button")?.addEventListener("click",()=>window.open(E,"_blank"))},$=()=>(M.add(),{load:E=>{be(E).then(()=>M.complete("libs")).catch(()=>M.invalid("libs"))}}),C=async()=>{o(),m(),i(),y(),g(),n.has("presence")&&(document.getElementById("form-presence").value=n.get("presence")?"1":"2"),n.get("info")&&document.getElementById("information")?.remove(),await u.changeOpacity(document.getElementById("welcome"),!0),await u.changeOpacity(document.getElementById("loading"),!1).then(T=>T.remove())},k=()=>{let T=[{url:"./assets/music/eleventwelfth-your_head_as_my_favourite_bookstore.mp3",volume:.2},{url:"./assets/music/the_cranberries-linger.mp3",volume:.7},{url:"./assets/music/radwimps-zenzenzense.mp3",volume:.08}],E=localStorage.getItem("lastSong"),d=T.length>1&&E?T.filter(_=>_.url!==E):T,e=d[Math.floor(Math.random()*d.length)];localStorage.setItem("lastSong",e.url),document.body.setAttribute("data-audio",e.url),document.body.setAttribute("data-audio-volume",e.volume),W.init(),ye.init(),le.init(),oe.init(),r=O("config"),n=O("information");let t=!n.has("visited");if(c(),t)n.set("visited",!0),M.init();else{let _=document.getElementById("loading");_&&_.remove(),u.changeOpacity(document.getElementById("welcome"),!0).then(()=>{o(),m(),i(),y(),g(),n.has("presence")&&(document.getElementById("form-presence").value=n.get("presence")?"1":"2"),n.get("info")&&document.getElementById("information")?.remove()})}let l=fe.init(),w=ge.init(),x=pe.init(),I=$(),S=document.body.getAttribute("data-key"),R=new URLSearchParams(window.location.search);window.addEventListener("resize",u.debounce(p)),t&&document.addEventListener("undangan.progress.done",()=>C()),document.addEventListener("hide.bs.modal",()=>document.activeElement?.blur()),(!S||S.length<=0)&&(document.getElementById("comment")?.remove(),document.querySelector('a.nav-link[href="#comment"]')?.closest("li.nav-item")?.remove(),l.load(),w.load(),x.load(),I.load({confetti:document.body.getAttribute("data-confetti")==="true"})),S&&S.length>0&&(M.add(),M.add(),w.hasDataSrc()||w.load(),q.guest(R.get("k")??S).then(({data:_})=>{document.dispatchEvent(new Event("undangan.session")),M.complete("config"),w.hasDataSrc()&&w.load(),l.load(),x.load(),I.load({confetti:_.is_confetti_animation}),oe.show().then(()=>M.complete("comment")).catch(()=>M.invalid("comment"))}).catch(()=>M.invalid("config")))};return{init:()=>(Z.init(),q.init(),q.isAdmin()&&(O("user").clear(),O("owns").clear(),O("likes").clear(),O("session").clear(),O("comment").clear()),window.addEventListener("load",()=>{re.init(k,["image","video","audio","libs","gif"])}),{util:u,theme:Z,comment:oe,invitation:le,guest:{open:a,modal:f,showStory:s,closeInformation:h}})}})();(n=>{n.undangan=Ee.init()})(window);})();
